import{d as w,G as K,bZ as k,ai as v,o as m,g as M,w as x,a as C,aG as L,aN as O,ax as p,ag as j,aP as I,aQ as q,l as u,bK as G,cm as T,m as U,q as N,cn as E,co as F,cp as Q,cq as R}from"./index-6b87b9fd.js";import{r as P}from"./pathe.92c04245-796500ea.js";const A=w({__name:"SideBar",setup(V){const S=U(),l=q(),f=K([l.path]),h=K(),o=N("sidebarRelated"),i=N("keepAlivePages");k.refreshSidebar(),v(()=>l.path,()=>{f.value=[l.meta.belongs||l.path],o!=null&&o.collapsed||y(),l.meta.keepAlive&&!(i!=null&&i.has(l.name))&&(i==null||i.add(l.name))},{immediate:!0}),v(()=>o==null?void 0:o.collapsed,e=>{e||y()});function y(){h.value=S.getRoutes().filter(e=>l.path.includes(e.path)).map(e=>e.path)}const b=e=>!e||e&&!e.icon?null:typeof e.icon=="string"?u(R,{iconName:e.icon}):u(e==null?void 0:e.icon),B=(e,{slots:n})=>{var r;return(r=e.route.meta)!=null&&r.external?u("a",{href:e.route.redirect,target:"_blank"},{default:()=>{var a;return(a=n.default)==null?void 0:a.call(n)}}):u(Q,{to:e.url},{default:()=>{var a;return(a=n.default)==null?void 0:a.call(n)}})},_=e=>{var a;const n=t=>{const s={icon:()=>b(t.meta),title:()=>{var c;return(c=t.meta)==null?void 0:c.title}},d=P(e.basePath,t.path);return u(E,{key:d},{default:()=>{var c;return(c=t.children)==null?void 0:c.map(g=>u(_,{route:g,basePath:d,key:g.path}))},...s})},r=t=>{const s={icon:()=>b(t.meta)},d=P(e.basePath,t.path);return u(F,{key:d},{default:()=>u(B,{route:t,url:d},()=>{var c;return u("span",(c=t.meta)==null?void 0:c.title)}),...s})};return(a=e.route.meta)!=null&&a.hidden?u("div",{style:"display: none"}):e.route.children&&e.route.children.filter(t=>{var s;return!((s=t.meta)!=null&&s.hidden)}).length>0?e.route.children.filter(t=>{var s;return!((s=t.meta)!=null&&s.hidden)}).length>1?n(e.route):r($(e.route)):r(e.route)};function $(e){var r;const n=(r=e.children)==null?void 0:r.find(a=>{var t;return!((t=a.meta)!=null&&t.hidden)});return Object.assign({},n,{path:`${e.path}/${n==null?void 0:n.path}`})}return(e,n)=>{const r=G,a=T;return m(),M(a,{speed:4},{default:x(()=>[C(r,{selectedKeys:p(f),"onUpdate:selectedKeys":n[0]||(n[0]=t=>I(f)?f.value=t:null),openKeys:p(h),"onUpdate:openKeys":n[1]||(n[1]=t=>I(h)?h.value=t:null),mode:"inline",inlineIndent:16,selectable:!1},{default:x(()=>[(m(!0),L(j,null,O(p(k).getSidebar(),t=>(m(),M(_,{key:"index",route:t,basePath:t.path},null,8,["route","basePath"]))),128))]),_:1},8,["selectedKeys","openKeys"])]),_:1})}}});export{A as default};
