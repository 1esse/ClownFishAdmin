function h(l=""){return!l||!l.includes("\\")?l:l.replace(/\\/g,"/")}const g=/^[/\\](?![/\\])|^[/\\]{2}(?!\.)|^[A-Za-z]:[/\\]/;function u(){return typeof process<"u"?process.cwd().replace(/\\/g,"/"):"/"}const a=function(...l){l=l.map(n=>h(n));let i="",e=!1;for(let n=l.length-1;n>=-1&&!e;n--){const t=n>=0?l[n]:u();!t||t.length===0||(i=`${t}/${i}`,e=c(t))}return i=d(i,!e),e&&!c(i)?`/${i}`:i.length>0?i:"."};function d(l,i){let e="",n=0,t=-1,r=0,f=null;for(let s=0;s<=l.length;++s){if(s<l.length)f=l[s];else{if(f==="/")break;f="/"}if(f==="/"){if(!(t===s-1||r===1))if(r===2){if(e.length<2||n!==2||e[e.length-1]!=="."||e[e.length-2]!=="."){if(e.length>2){const o=e.lastIndexOf("/");o===-1?(e="",n=0):(e=e.slice(0,o),n=e.length-1-e.lastIndexOf("/")),t=s,r=0;continue}else if(e.length>0){e="",n=0,t=s,r=0;continue}}i&&(e+=e.length>0?"/..":"..",n=2)}else e.length>0?e+=`/${l.slice(t+1,s)}`:e=l.slice(t+1,s),n=s-t-1;t=s,r=0}else f==="."&&r!==-1?++r:r=-1}return e}const c=function(l){return g.test(l)};export{a as r};
